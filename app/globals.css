@import "tailwindcss";

/* Notion CSS imports for proper rendering */
@import 'react-notion-x/src/styles.css';
@import 'prismjs/themes/prism-tomorrow.css';
@import 'katex/dist/katex.min.css';

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-geist-sans), system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-feature-settings: 'cv11', 'ss01';
  font-variant-numeric: tabular-nums;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Line clamp utility for card descriptions */
.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Ensure nothing swallows clicks in the Notion subtree */
.notion, .notion * { pointer-events: auto !important; }

/* Native details/summary behavior + good cursor */
details { display: block; }
.notion-toggle > summary {
  display: list-item;
  cursor: pointer;
  user-select: none;
}

/* If the content div relies on display toggling, enforce it */
details.notion-toggle:not([open]) > div { display: none !important; }
details.notion-toggle[open] > div { display: block !important; }

/* Ensure toggle content is properly hidden/shown */
.notion-toggle:not([open]) .notion-toggle-content { display: none !important; }
.notion-toggle[open] .notion-toggle-content { display: block !important; }

/* Keep toggles above any accidental overlay */
.notion-toggle { position: relative; z-index: 10; }

/* Fix code block rendering without breaking layout */
.notion-code {
  display: block;
  white-space: pre-wrap;
  font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
  font-size: 14px;
  line-height: 1.45;
}

/* Notion-style code blocks - with proper wrapping */
pre.notion-code {
  background: rgb(242, 241, 238) !important;
  border: 1px solid rgba(55, 53, 47, 0.16) !important;
  border-radius: 3px !important;
  padding: 16px !important;
  overflow-x: hidden !important;
  font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace !important;
  font-size: 14px !important;
  line-height: 1.4 !important;
  margin: 4px 0 !important;
  color: rgb(55, 53, 47) !important;
  white-space: pre-wrap !important;
  word-wrap: break-word !important;
  tab-size: 4 !important;
  overflow-wrap: break-word !important;
}

/* Dark mode - Notion style */
.dark pre.notion-code {
  background: rgb(46, 45, 43) !important;
  border: 1px solid rgba(255, 255, 255, 0.13) !important;
  color: rgba(255, 255, 255, 0.81) !important;
}

/* Generic code block styling - Notion replica with wrapping */
.notion-code-block {
  margin: 4px 0;
}

.notion-code-block pre {
  background: rgb(242, 241, 238) !important;
  border: 1px solid rgba(55, 53, 47, 0.16) !important;
  border-radius: 3px !important;
  padding: 16px !important;
  overflow-x: hidden !important;
  font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace !important;
  font-size: 14px !important;
  line-height: 1.4 !important;
  color: rgb(55, 53, 47) !important;
  white-space: pre-wrap !important;
  word-wrap: break-word !important;
  tab-size: 4 !important;
  overflow-wrap: break-word !important;
}

/* Dark mode for generic code blocks - Notion style */
.dark .notion-code-block pre {
  background: rgb(46, 45, 43) !important;
  border: 1px solid rgba(255, 255, 255, 0.13) !important;
  color: rgba(255, 255, 255, 0.81) !important;
}

.notion-code-caption {
  font-size: 12px;
  color: #6b7280;
  text-align: center;
  margin-top: 8px;
  font-style: italic;
}

.dark .notion-code-caption {
  color: #9ca3af;
}

/* Fix blank code blocks */
.notion-blank {
  min-height: 20px;
  display: block;
}

/* Notion-style code content with proper wrapping */
.notion-code code,
.notion-code-block code {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  margin: 0 !important;
  font-family: inherit !important;
  font-size: inherit !important;
  line-height: inherit !important;
  color: inherit !important;
  white-space: pre-wrap !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
  display: block;
}

/* Hide scrollbars since we're wrapping content */
.notion-code::-webkit-scrollbar,
.notion-code-block pre::-webkit-scrollbar {
  display: none;
}

.notion-code,
.notion-code-block pre {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Notion-style code block container behavior */
.notion-code,
.notion-code-block {
  margin: 4px 0;
}

.notion-code,
.notion-code-block pre {
  width: 100%;
  display: block;
}

/* Fix Notion page icon sizing */
.notion-page-icon {
  width: 78px !important;
  height: 78px !important;
  object-fit: cover !important;
  border-radius: 3px !important;
}

/* Fix page icon container */
.notion-page-icon-inline {
  width: 78px !important;
  height: 78px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Twitter embed styling within Notion content */
.notion-embed {
  margin: 1rem 0;
  display: flex;
  justify-content: center;
  min-height: 200px;
}

.notion-embed iframe[src*="twitter.com"] {
  max-width: 100% !important;
  width: 100% !important;
}

/* Ensure Twitter widgets render properly */
.twitter-tweet {
  margin: 1rem auto !important;
  max-width: 550px !important;
}

.notion-tweet-embed {
  display: flex;
  justify-content: center;
  margin: 1rem 0;
}

/* Style Twitter embeds in dark mode */
.dark .twitter-tweet {
  color-scheme: dark;
}

/* Loading state for Twitter embeds */
.notion-embed:empty::before {
  content: 'Loading tweet...';
  display: flex;
  align-items: center;
  justify-content: center;
  height: 200px;
  color: #666;
  font-style: italic;
}
